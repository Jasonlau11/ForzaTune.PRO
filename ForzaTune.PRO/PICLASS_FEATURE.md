# PI等级功能说明

## 功能概述

根据Forza游戏系列的PI等级系统，我们在ForzaTune PRO中添加了完整的PI等级支持，让用户可以更精确地分类和搜索调校。

## PI等级分类

### Forza游戏PI等级系统
- **X级**: 999 PI - 最高性能级别
- **S2级**: 901-998 PI - 超高性能
- **S1级**: 801-900 PI - 高性能
- **A级**: 701-800 PI - 中高性能
- **B级**: 601-700 PI - 中等性能
- **C级**: 501-600 PI - 中低性能
- **D级**: 100-500 PI - 入门级性能

## 新增功能

### 1. 上传调校时的PI等级选择

**位置**: `/upload` 页面

**功能特性**:
- **PI等级选择器**: 下拉菜单选择X、S2、S1、A、B、C、D级别
- **最终PI输入**: 数字输入框，根据选择的等级自动限制范围
- **实时验证**: 确保输入的PI值在所选等级的合法范围内
- **错误提示**: 当PI值超出等级范围时显示中文错误信息

**使用示例**:
```
选择 "S2级 (901-998)" → PI输入框限制为 901-998
输入 850 → 显示错误"PI值必须在 901-998 范围内"
```

### 2. 调校列表的PI等级筛选

**位置**: `/cars/:id/tunes` 页面

**功能特性**:
- **PI等级筛选器**: 新增PI等级下拉筛选选项
- **等级显示**: 在调校列表表格中新增PI等级列
- **彩色标签**: 每个PI等级使用不同的渐变色彩标识

**筛选示例**:
```
筛选 "X级" → 只显示X级(999 PI)的调校
筛选 "S1级" → 只显示S1级(801-900 PI)的调校
```

### 3. PI等级视觉标识

**PI等级颜色系统**:
- **X级**: 紫色到粉色渐变 (最高级别)
- **S2级**: 红色到橙色渐变
- **S1级**: 蓝色到靛蓝渐变
- **A级**: 绿色到祖母绿渐变
- **B级**: 黄色到琥珀色渐变
- **C级**: 灰色到石板灰渐变
- **D级**: 浅灰色到深灰色渐变

### 4. 组件化设计

**PIClassBadge组件**:
```vue
<PIClassBadge 
  :pi-class="'S2'" 
  :pi="962" 
  :show-p-i-value="true" 
/>
```

**组件特性**:
- 自动根据PI值计算等级
- 支持显示等级+PI值或仅等级
- 统一的视觉样式
- 在首页、车型列表、调校列表中复用

## 页面更新

### 1. 首页 (`/`)
- **最新调校**: 显示PI等级标签
- **专业推荐**: 显示PI等级标签
- **热门车型**: 根据PI值自动显示等级

### 2. 车型列表 (`/cars`)
- **车型卡片**: 使用PI等级标签替代原始PI显示

### 3. 调校列表 (`/cars/:id/tunes`)
- **新增PI等级筛选**: 5列筛选器布局
- **表格新列**: PI等级列显示彩色标签
- **筛选逻辑**: 支持按PI等级筛选调校

### 4. 上传调校 (`/upload`)
- **PI等级选择**: 必填字段
- **PI值输入**: 范围验证
- **实时验证**: 输入时检查合法性

## 技术实现

### 类型定义
```typescript
// PI等级类型
export type PIClass = 'X' | 'S2' | 'S1' | 'A' | 'B' | 'C' | 'D'

// PI等级信息
export interface PIClassInfo {
  class: PIClass
  range: string
  minPI: number
  maxPI: number
}

// 更新的调校接口
export interface Tune {
  // ... 其他字段
  piClass: PIClass
  finalPI: number
}
```

### 工具函数
```typescript
// 根据PI值自动获取等级
getPIClass(850) // 返回 'S1'

// 验证PI值是否在等级范围内
validatePIForClass(850, 'S2') // 返回 false

// 获取等级样式类名
getPIClassStyle('X') // 返回渐变CSS类名
```

### 多语言支持
- **中文**: X级 (999)、S2级 (901-998)
- **英文**: X Class (999)、S2 Class (901-998)

## 用户体验改进

1. **精确分类**: 用户可以按精确的PI等级搜索调校
2. **视觉识别**: 彩色等级标签让不同性能级别一目了然
3. **输入验证**: 防止用户输入错误的PI等级组合
4. **符合游戏**: 完全按照Forza游戏的PI系统设计

## 使用说明

### 上传调校时
1. 选择对应的PI等级
2. 输入准确的最终PI值
3. 系统会自动验证PI值是否在等级范围内

### 搜索调校时
1. 使用PI等级筛选器快速定位
2. 查看彩色等级标签了解调校性能级别
3. 按不同等级比较调校效果

## 访问地址

项目运行在: **http://localhost:3002**

测试功能:
1. 访问上传页面测试PI等级选择
2. 查看首页的PI等级显示
3. 进入调校列表测试等级筛选 